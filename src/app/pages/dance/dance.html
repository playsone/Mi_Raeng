<div class="page-container">
  <div class="webcam-container">
    <video #video autoplay playsinline muted></video>
    <canvas #canvas></canvas>

    <div class="hud-overlay">
      <header class="hud-header"></header>
      <main class="hud-main">
        <!-- <div *ngIf="!isLoading && isMoving" class="state-display moving">
          <p>ยอดเยี่ยม ขยับต่อไป!</p>
        </div> -->
        <!-- <div *ngIf="!isLoading && !isMoving" class="state-display not-moving">
          <p>ลองขยับตัวดูสิ!</p>
        </div> -->
      </main>
      <footer class="hud-footer">
        <button (click)="quitExercise()" class="finish-btn">จบ</button>
      </footer>
    </div>

    <div *ngIf="isLoading" class="loading">
      {{ statusMessage }}
    </div>
  </div>

  <div *ngIf="showPopup" class="popup-overlay">
    <div class="popup-content">
      <div class="stars">
        <span>⭐</span>
        <span>⭐</span>
        <span>⭐</span>
      </div>
      <p class="reward-text">+ {{ workoutMinutes }} นาที</p>
      <p class="reward-text">+ {{ score | number : "1.0-0" }} คะแนน</p>
    </div>
    <button class="home-btn" (click)="goHome()">หน้าหลัก</button>
  </div>

  <div class="youtube-container">
    <h2>วิดีโอต้นแบบ</h2>
    <!-- เดิมมี autoplay/loop → เอาออก และเพิ่ม preload="metadata" -->
    <video
      #refVideo
      width="100%"
      height="100%"
      [src]="videoSourceUrl"
      controls
      preload="metadata"
      playsinline
    ></video>
  </div>

  <div class="timer-display">{{ formattedTime }}</div>
</div>
